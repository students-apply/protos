syntax = "proto3";

package resume;

option go_package = "github.com/students-apply/protos;resume";
import "google/protobuf/timestamp.proto";


service ResumeService {
  rpc CreateResume(CreateResumeRequest) returns (CreateResumeResponse);
  rpc UpdateResume(UpdateResumeRequest) returns (UpdateResumeResponse);
  rpc GetResumeByID(GetResumeByIDRequest) returns (GetResumeByIDResponse);
  rpc GetUserResumes(GetUserResumesRequest) returns (GetUserResumesResponse);
  rpc DeleteResume(DeleteResumeRequest) returns (DeleteResumeResponse);
}

service ExperienceService {
  rpc CreateExperience(CreateExperienceRequest) returns (CreateExperienceResponse);
  rpc UpdateExperience(UpdateExperienceRequest) returns (Experience);
  rpc GetExperience(GetExperienceRequest) returns (Experience);
  rpc DeleteExperience(DeleteExperienceRequest) returns (DeleteExperienceResponse);
}

message CreateResumeRequest {
  string user_id = 1;
  Resume resume = 2;
}

message CreateResumeResponse {
  string resume_id = 1;
}

message UpdateResumeRequest {
  string user_id = 1;
  string resume_id = 2;
  Resume resume = 3;
}

message UpdateResumeResponse {
  Resume resume = 1;
}

message GetResumeByIDRequest {
  string user_id = 1;
  string resume_id = 2;
}

message GetResumeByIDResponse {
  optional Resume resume = 4;
}

message GetUserResumesRequest {
  string user_id = 1;
}

message GetUserResumesResponse {
  repeated Resume resumes = 1;
}

message DeleteResumeRequest {
  string resume_id = 1;
}

message DeleteResumeResponse {}

message CreateExperienceRequest {
  string resume_id = 1;
  string user_id = 2;
  Experience experience = 3;
}

message CreateExperienceResponse {
  string experience_id = 1;
}

message UpdateExperienceRequest {
  string experience_id = 1;
  string user_id = 2;
  Experience experience = 3;
}


message GetExperienceRequest {
  string experience_id = 1;
}

message DeleteExperienceRequest {
  string experience_id = 1;
  string user_id = 2;
}

message DeleteExperienceResponse {}

message Resume {
  string first_name = 1;
  string last_name = 2;
  optional string middle_name = 3;
  google.protobuf.Timestamp birthday = 4;
  string email = 5;
  optional string phone = 6;
  int32 city_id = 7;
}


message Experience {
  string resume_id = 1;
  string position = 2;
  string company = 3;
  google.protobuf.Timestamp start_date = 4;
  google.protobuf.Timestamp end_date = 5;
  string description = 6;
}

message Skill {
  string resume_id = 1;
  string skill_name = 2;
  float level = 3;
}

message Image {
  string resume_id = 1;
  bytes chunk = 2;
  string content_type = 3;
  string name = 4;
}